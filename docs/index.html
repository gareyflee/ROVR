<html>

<head>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
    <a href="index.html">
        <h1 style="text-align:center">ECE153B W19 ROVR Project</h1>
    </a>
    <nav class="box" style="text-align:center"><a href="about.html">About</a><a href="team.html">Team</a></nav>
    <article>
        <img src="" style="width:100%;height:0%;" />
        <h1>P.</h1>
        <p>2019-03-20 : 00:00am to 2019-03-20 : 00:10am</p>
        <p>Data processing and code in progress.</p>
    </article>
    <article>
        <img src="resources/Data_Gathering.jpg"
            style="display:block;width:40%;margin:auto;filter:blur(2px);-webkit-filter:blur(2px);" />
        <h1>Progress Paved with Stubmles</h1>
        <p>2019-03-19 : 2:40pm to 11:59pm</p>
        <p>In beginning development tonight, we encountered significant problems with our initial design intents because
            of our intended listening process. We assumed that the voice signal would be sampled sufficiently quickly
            that its objective power would be the same. From that, we assumed we could find directional power. However,
            two-syllable and less words are extremely short (~100ms) and our sampling rate is limited to 3300 samples
            per second. We need to make sure that we do not do a read to determine direction between to microphone reads
            not done during the same word. For this purpose, Kyle proposed several exceptional data processing
            algorithms to better control the input data. We wrote code to collect data from the LPC4088 and began to
            perform our proposed data processing in Excel and MATLAB, estimating performance for several test sets of
            simple tones and voice samples.</p>
        <p>We also discovered that even with explicitly programmed gain, the actual signal gain from each mic varied
            wildly between our four units. To correct this, we also generated normalization scalars from our test data
            to apply to each microphone.</p>
    </article>
    <article>
        <img src="resources/Assembly.jpg"
            style="display:block;width:40%;margin:auto;filter: blur(2px);-webkit-filter: blur(2px);" />
        <h1>People Pursuing Part Connection</h1>
        <p>2019-03-18</p>
        <p>This meeting, most of the group met from 6:30pm onward through 2am, completing assembly of the board on
            the 3D-printed board mount and beginning to test the algorithms for operating the board. We discovered our
            initially intended computation battery could not supply sufficient current to power the LPC4088 developer
            kit and our mics together. We also discovered nonlinear behaviour in the power output of our H-bridge at 6
            volts, so to ensure consistent behaviour we decided to double our motor power supply voltage.
        </p>
    </article>
    <article>
        <img src="resources/Mount.jpg" style="width:100%;" />
        <h1>Performant Averaging</h1>
        <p>2019-03-16</p>
        <p>Today we completed I2C read code for two microphones and began writing code to average their output data.
            While values returned were proportional to the volume we fed into the microphone, we noticed significant
            echo pickup from the environment that threw off attempts to determine signal directionality in the
            two-microphone case. We hope this will not become a significant problem in the four-microphone case, but to
            help mitigate it we are developing a backboard for the microphone mounts to ensure they pickup fully only
            sounds incident on their facing direction. We are also nearing completion of the 3D-printed board mount, the
            plastic and print time for which were helpfully provided by Toyon Industries. Thanks Toyon!</p>
    </article>
    <article>
        <h1>Performing I2C</h1>
        <p>2019-03-12</p>
        <p>This lab session explored wiring the ADC and mics, powering the ADC and mics, and getting our first I2C
            communication with the ADC. We saw good microphone output on oscilloscopes and got valid bytes back from the
            ADC. Our next steps are completion of the mounting board and ADC I2C handling code.</p>
    </article>
    <article>
        <img src="resources/MotorIm.jpg"
            style="display:block;width:40%;margin:auto;filter: blur(2px);-webkit-filter: blur(2px);" />
        <h1>Performant Motors</h1>
        <p>2019-03-09</p>
        <p>We had another weekend meeting, this time to finish code for running our motors forward and in reverse.</p>
        <p>During this testing, we made a couple mistakes. We...</p>
        <ul>
            <li>Forgot to have a common ground for the circuit</li>
            <li>Forgot to change pin numbers in the code to match our GPIO map</li>
            <li>Forgot to change PWM width from our previous testing to make sure we ran the right program</li>
            <li>Forgot to check the code for reverse motor operation</li>
        </ul>
        <p>Testing pins with an oscilloscope, we located the first two and corrected them. The motors turned at a speed
            proportional to the PWM duty cycle, so we assume our code works well enough.</p>
    </article>
    <article>
        <div style="height:14vw;overflow:hidden;">
            <img src="resources/GPIO_Map.png" style="width: 100%; filter: blur(2px);-webkit-filter: blur(2px);" />
        </div>
        <h1>Parts Experimentation</h1>
        <p>2019-03-06</p>
        <p>This week was parts interface week. We hooked up our motors through the <a
                href="https://www.newegg.com/Product/Product.aspx?Item=9SIAAZM4DF5385">L298N Dual H-bridge for
                Arduino</a> package (part number ASMMR in the ECE shop) and provided 5V supply from the lab bench power
            supply, then controlled the H-bridge with a PWM signal. It worked! Unfortunately, only one of our first
            selected GPIO pins worked. After further testing, we discovered that the vast majority of the GPIO pins on
            our LPC4088 developer's kit were not responding, even after we ensured the IO-Configuration Register
            (IOCONN) had been configured to set each of those pins in GPIO output mode. Thankfully, with trial-and-error
            testing, we found six pins that were viable for timer-based GPIO PWM.</p>
        <p>During the trial-and-error testing, we also began to import <a href="#I2C"
                aria-describedby="footnote-label">I<sup>2</sup>C</a> behavior from our lab2 code, for interfacing
            with the <a href="https://www.adafruit.com/product/1083">Adafruit ADS1015</a> 12-bit multiplexing ADC.</p>
        <p>Finally, we also disabled automatic gain on our <a
                href="https://www.amazon.com/Adafruit-Electret-Microphone-Amplifier-MAX9814/dp/B00SLYAI9K/ref=sr_1_1_sspa?ie=UTF8&qid=1550635698&sr=8-1-spons&keywords=electret+microphone&psc=1&smid=AM0JQO74J587C">Adafruit
                MAX9814</a> microphones and measured their performance on an oscilloscope. We got some good near-sine
            waves with whistling and humming and some good noise from holding consonants; that appeared to be working
            well.</p>
        <footer>
            <ol>
                <li id="I2C">I<sup>2</sup>C was formerly a trademark of NXP semiconductors.</li>
            </ol>
        </footer>

    </article>
    <article>
        <img src="resources/FIXME.jpg" style="width: 100%; filter: blur(2px);-webkit-filter: blur(2px);" />
        <h1>Programming weekend</h1>
        <p>2019-03-02</p>
        <p>Our programming group met Saturday this week to go over PWM specs and to test our motors. The motors were
            more powerful than we expected, a pleasant surprise. They also drew a low enough current that we could begin
            considering driving them directly from the LPC4088 pins. Debate as to the safety of such a setup for our
            development board is ongoing.</p>
        <p>This weekend's major challenge came in the form of a tiny FIXME message. Astoundingly, the LPC4088 developer
            board drivers provided for ECE 153B students does not have drivers for the PWM modules. This immediately
            stymied our progress toward writing a simple interface for our particular use case. We sepnt some three
            hours pouring over datasheets and, eventually, located the PWM memory region layout and output pins. While
            based off the standard Timer blocks, the PWM blocks had some subtle differences (like removal of the
            External Capture Register) that made directly adapting the Timer drivers difficult. Currently, our group is
            carefully weighing the interrupt cost of handling PWM through a basic timer block and interrupts, versus the
            development cost of writing our own drivers to use the PWM blocks.</p>
    </article>
    <article>
        <img src="resources/VectorUtil.png" style="width: 100%; filter: blur(4px);-webkit-filter: blur(4px);" />
        <h1>Programming begun</h1>
        <p>2019-02-26</p>
        <p>This week, waiting for the parts to arrive, we began to program utility classes and the general program
            structure for the ROVR LPC4088. We also completed deployment of our project website to GitHub Pages. The
            project code and website are published <a href="https://github.com/gareyflee/ROVR">here on GitHub</a> for
            your viewing pleasure.</p>
        <p>We have scheduled an extra lab session for this Saturday, once the parts have arrived, to make more progress
            before the coming week.</p>
    </article>
    <article>
        <img src="resources/Hardware_Diagram.svg" style="width:49%; margin: auto;" />
        <img src="resources/Software_Diagram.svg" style="width:49%; margin: auto;" />
        <h1>Parts ordered</h1>
        <p>2019-02-19</p>
        <p>This week, we designed system block diagrams and ordered the additional parts we'll need for the lab. Finding
            an ADC with which we could interface was a significant challenge, as many ADCs within our budget wouldn't
            support signal multiplexing or had an insufficient sampling rate for picking up even deep male voices.</p>
        <p>Using the <a href="https://www.audacityteam.org/">Audacity</a> sound editing software, we tested the
            recoverable signals according to the nyquist rate of the ADCs we considered, eventually settling on the <a
                href="https://www.adafruit.com/product/1083">Adafruit ADS1015</a>, a 12-bit 4-channel multiplexing ADC
            with programmable gain. We also chose Adafruit for our microphones, taking advantage of the <a
                href="https://www.amazon.com/Adafruit-Electret-Microphone-Amplifier-MAX9814/dp/B00SLYAI9K/ref=sr_1_1_sspa?ie=UTF8&qid=1550635698&sr=8-1-spons&keywords=electret+microphone&psc=1&smid=AM0JQO74J587C">Adafruit
                MAX9814</a> for its easy pin access, mountable pcb form-factor, and the ability to disable its automatic
            gain control.</p>
        <p>We also considered motors with reasonable gearing ratios for our project, eventually settling on the <a
                href="https://www.amazon.com/Yosoo-Reduction-300RPM-Gearbox-Replacement/dp/B01BBSXDJ4/ref=sr_1_1_sspa?ie=UTF8&qid=1550635020&sr=8-1-spons&keywords=yosoo%2Bmini%2Bspeed%2Breduction%2Bmotor&th=1">Yosoo
                Mini DC 6V Speed Reduction Motor</a> for providing 300RPM as its max speed via a built-on gearbox. A low
            base RPM was important, as constructing a new motor gearbox was outside the scope of this project. We also
            decided on a brushed DC motor rather than a stepped motor to simplify the otherwise complex PWM operations
            necessary to provide power to the motor. </p>
        <p>Finally, we identified some H-bridges from our existing parts that could be used to give high-current power
            to the motors while still controlling the motors LPC4088 built-in PWM module.</p>
    </article>
    <article>
        <div style="height:23vw;overflow:hidden;">
            <img src="resources/ProposalHead.png" style="width: 100%; filter: blur(3px);-webkit-filter: blur(3px);" />
        </div>

        <h1>Project proposed!</h1>
        <p>2018-02-14</p>
        <p>Welcome to the ROVR project homepage! The ROVR project is a toy student project to explore the limits of
            software digital signal processing on the LPC4088 developer's kit.</p>
        <p>You can download the project proposal <a href="resources/GKM_ECE153B_Project_Proposal.pdf">here</a>.</p>
    </article>
</body>

</html>